# 30分鐘 Kafka 教程

- **頻道**: GeekHour
- **日期**: 2025-07-19
- **連結**: https://www.youtube.com/watch?v=ulRPAtj99-w
- **時長**: 約 30 分鐘

## 影片概述

本影片提供 Apache Kafka 的入門教程，涵蓋 Kafka 的核心概念、架構和基本操作。通過實際的例子和步驟，幫助開發者快速上手 Kafka，並將其應用於實際的專案中。

## Kafka 核心概念

- **事件 (Event)**：Kafka 中的基本資料單位，包含 Key、Value、Timestamp 等資訊
- **主題 (Topic)**：用來對事件進行分類，類似資料庫中的表
- **分區 (Partition)**：主題可以分成多個分區，用於提高吞吐量和可擴展性
- **生產者 (Producer)**：發布事件到 Kafka 的應用程式
- **消費者 (Consumer)**：訂閱主題並處理事件的應用程式
- **偏移量 (Offset)**：用於記錄消費者已消費的事件位置，確保不會重複或漏消費
- **Broker**：Kafka 集群由多個 Broker 組成，每個都是獨立的伺服器
- **副本 (Replica)**：每個分區可有多個副本，提高資料可靠性和可用性
- **Leader/Follower**：每個分區有一個 Leader 處理讀寫，Follower 負責複製資料
- **消費者組 (Consumer Group)**：多個消費者可組成消費者組，共同消費主題的消息

## 主要技術要點

### 解耦 (Decoupling)
- Kafka 作為消息中間件，將生產者和消費者解耦
- 服務之間不需要直接通信，降低系統複雜性

### 異步通信 (Asynchronous Communication)
- 生產者發布事件後不需等待消費者處理完成
- 提高系統效率

### 可靠性 (Reliability)
- 通過資料持久化和副本機制保證資料可靠性
- 即使某個 Broker 當機也不會丟失資料

### 可擴展性 (Scalability)
- 集群可根據業務需求擴展
- 通過增加 Broker 提高吞吐量和可用性

### 有序性 (Ordering)
- 只保證每個分區內的消息有序
- 不同分區之間的訊息順序不保證

### 負載均衡 (Load Balancing)
- 自動將主題的分區分佈到不同的 Broker 上

### 消費者組
- 每條消息只能被同一消費者組中的一個消費者消費
- 可以被多個不同的消費者組消費

## 實作步驟

### macOS 環境 (使用 Homebrew)

```bash
# 安裝 Kafka
brew install kafka

# 啟動 Kafka 服務（後台）
brew services start kafka

# 或前台啟動
kafka-server-start /opt/homebrew/etc/kafka/server.properties

# 驗證安裝
cd /opt/homebrew/Cellar/kafka/<version>/bin
./kafka-topics --version
```

### Linux 環境 (使用二進制包)

```bash
# 下載並解壓 Kafka
tar -xzf <kafka_package.tgz>

# 生成集群 UUID
export CLUSTER_ID="$(bin/kafka-storage.sh random-uuid)"

# 格式化儲存目錄
bin/kafka-storage.sh format -t $CLUSTER_ID -c config/server.properties

# 啟動 Kafka 服務
bin/kafka-server-start.sh config/server.properties

# 驗證安裝
./kafka-topics.sh --version
```

## 適合對象

- 對消息佇列和分散式系統有基本了解的開發者
- 希望在微服務架構中使用 Kafka 實現服務間解耦和異步通信的開發者
- 需要處理大量事件流資料的開發者
- 對 Apache Kafka 感興趣的學生和技術愛好者
